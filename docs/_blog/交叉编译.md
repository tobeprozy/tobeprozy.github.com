---
title: äº¤å‰ç¼–è¯‘
article: true
date: 2023-04-22
category:
  - linux
tag:
  - docker
  - äº¤å‰ç¼–è¯‘
order: 
icon: ğŸ“…
---

### ä¸€ã€äº¤å‰ç¼–è¯‘æ¦‚å¿µ
åœ¨è®¾å¤‡Aä¸‹å¼€å‘ç¼–è¯‘çš„ç¨‹åºï¼Œæ”¾åˆ°è®¾å¤‡Bä¸Šè¿è¡Œ

### äºŒã€å¼€å‘æ­¥éª¤

æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬
cat /proc/version!

![](./photo/1.png)



#### 2.1 ä¸‹è½½dockeré•œåƒå’Œsdk
![](./photo/2.png)

å¤åˆ¶ä¸‹è½½é“¾æ¥å’Œå¹¶ç”¨wgetä¸‹è½½
![](./photo/3.png)

æŸ¥çœ‹æœ¬æœºdockerç‰ˆæœ¬
docker version
![](./photo/4.png)
å¦‚æœæ²¡æœ‰æ‰¾åˆ°dockerï¼Œåˆ™éœ€è¦é‡æ–°å®‰è£…ä¸€ä¸‹
å…·ä½“å®‰è£…å¦‚ä¸‹ï¼š
```c++
# å®‰è£…docker
 sudo apt-get install docker.io
 # dockerå‘½ä»¤å…rootæƒé™æ‰§è¡Œ
 # åˆ›å»ºdockerç”¨æˆ·ç»„ï¼Œè‹¥å·²æœ‰dockerç»„ä¼šæŠ¥é”™ï¼Œæ²¡å…³ç³»å¯å¿½ç•¥
 sudo groupadd docker
 # å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„
 sudo gpasswd -a ${USER} docker
 # é‡å¯dockeræœåŠ¡
 sudo service docker restart
# åˆ‡æ¢å½“å‰ä¼šè¯åˆ°æ–°groupæˆ–é‡æ–°ç™»å½•é‡å¯Xä¼šè¯
 newgrp dockerâ€‹
```

#### 2.2 æ›´æ–°
sudo apt update
#### 2.3å®‰è£…è§£å‹ç¼©å·¥å…·unzip,å¹¶è§£å‹sdk
sudo install unzip

unzip x8...


#### 2.4 åŠ è½½dockeré•œåƒ
ls
cd x86_sophonsdk3_ubuntu18.04_py37_dev_22.06_docker/
docker load -i x86_sophonsdk3_ubuntu18.04_py37_dev_22.06.docker

é€€å›åˆ°sdkç›®å½•
cd ..
cd sophonsdk_v3.0.0_20220716/

![](./photo/6.png)

è¿è¡Œ./docker_run_sophonsdk.sh

è¿è¡Œå®Œæˆä¹‹åå°±è¿›å…¥äº†dockerå®¹å™¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™è¾¹çš„ç›®å½•å°±æ˜¯æŒ‚è½½çš„sdkç›®å½•ï¼Œé€šè¿‡ç›®å½•æ˜ å°„å®ç°çš„
![](./photo/7.png)
#### 2.5 é…ç½®ç¯å¢ƒ
ç»§ç»­å®‰è£…ä¾èµ–åº“
![](./photo/8.png)

ç»§ç»­é…ç½®ç¯å¢ƒå˜é‡
source envsetup_cmodel.sh

ç„¶åå®‰è£…pythonå¯¹åº”ç‰ˆæœ¬çš„shellåŒ…
![](./photo/9.png)
pip3 install ../lib/sail/python3/pcie/py37/sophon-3.0.0-py3-none-any.whl --user
![](./photo/10.png)
äº¤å‰ç¼–è¯‘ç¯å¢ƒæ­å»ºå®Œæˆ

#### 2.6 ç¼–å†™ç¨‹åº
![](./photo/11.png)
![](./photo/13.png)
ç„¶åç¼–å†™Makefile.armæ–‡ä»¶
vim Makefile.arm
```bash
CXX = aarch64-linux-gnu-g++
  
CXXFLAGS := -g -O2 -Wall -std=c++11 $(INC_DIR)
LOCAL_MEM_ADDRWIDTH         ?= 19

CXXFLAGS += -DCONFIG_LOCAL_MEM_ADDRWIDTH=$(LOCAL_MEM_ADDRWIDTH)

all: helloworld.arm

helloworld.arm: helloworld.cpp
        $(CXX) $^ $(CXXFLAGS) $(LDLIBS) $(LDFLAGS) -o $@
clean:
        rm -f helloworld.arm
```

ç¼–è¯‘ï¼š
make -f Makefile.arm
![](./photo/15.png)

å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ªhelloworld.armæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥åœ¨SEç¯å¢ƒä¸‹æ‰§è¡Œï¼Œå¯ä»¥æŠŠè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡ä¸»æœºï¼Œå‡è®¾ç›®æ ‡ä¸»æœºçš„åŠ¨æ€ipä¸ºï¼š116.204.4.93ï¼Œä¸»æœºåä¸ºrootï¼Œé‚£ä¹ˆæ‹·è´å‘½ä»¤å¦‚ä¸‹ï¼š
scp helloworld.arm admin@116.204.4.93:/home
![](./photo/17.png)

åœ¨ç›®æ ‡ä¸»æœºä¸Šè¿è¡Œï¼š
./helloworld.armå°±å¯ä»¥æ‰“å°â€œhelloï¼Œworldï¼â€



